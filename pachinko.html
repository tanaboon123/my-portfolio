<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÄ‡∏Å‡∏°‡∏õ‡∏≤‡∏à‡∏¥‡∏á‡πÇ‡∏Å‡∏∞ TT2</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      text-align: center;
      margin: 0;
    }
    h1 {
      margin-top: 20px;
      color: #d84315;
    }
    #game-container {
      position: relative;
      margin: 20px auto;
      width: 320px;
      height: 500px;
      background-color: #fff3e0;
      border: 4px solid #ff9800;
      border-radius: 12px;
      overflow: hidden;
    }
    #spinner {
      width: 100px;
      height: 100px;
      border: 10px solid #9e9e9e;
      border-top: 10px solid silver;
      border-radius: 50%;
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      cursor: grab;
    }
    #ball {
      width: 20px;
      height: 20px;
      background-color: silver;
      border-radius: 50%;
      position: absolute;
      top: 470px;
      left: 50%;
      transform: translateX(-50%);
      display: none;
    }
    .slot {
      position: absolute;
      top: 20px;
      width: 60px;
      height: 15px;
      background-color: #4caf50;
      border-radius: 10px;
    }
    #slot-left { left: 30px; }
    #slot-center { left: 130px; }
    #slot-right { left: 230px; }

    #score, #high-score, #remaining, #round {
      margin-top: 10px;
      font-size: 1.2em;
    }
    #result {
      font-size: 1.5em;
      margin-top: 10px;
      color: #388e3c;
    }
    #reset-btn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1em;
      background-color: #e53935;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #reset-btn:hover {
      background-color: #c62828;
    }
  </style>
</head>
<body>
  <h1>üé∞ ‡πÄ‡∏Å‡∏°‡∏õ‡∏≤‡∏à‡∏¥‡∏á‡πÇ‡∏Å‡∏∞ TT2 üéâ</h1>

  <div id="game-container">
    <div id="slot-left" class="slot"></div>
    <div id="slot-center" class="slot"></div>
    <div id="slot-right" class="slot"></div>
    <div id="ball"></div>
    <div id="spinner"></div>
  </div>

  <div id="round">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà: 1 / 100</div>
  <div id="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0</div>
  <div id="high-score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 0</div>
  <div id="remaining">‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 100</div>
  <div id="result"></div>

  <button id="reset-btn" onclick="resetGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</button>

  <script>
    const spinner = document.getElementById("spinner");
    const ball = document.getElementById("ball");
    const scoreText = document.getElementById("score");
    const highScoreText = document.getElementById("high-score");
    const remainingText = document.getElementById("remaining");
    const resultText = document.getElementById("result");
    const roundText = document.getElementById("round");

    let dragging = false;
    let startX = 0;
    let spinForce = 0;
    let isBallActive = false;
    let velocity = 0;
    let positionY = 470;
    let positionX = 160;
    let remainingBalls = 100;
    let score = 0;
    let round = 1;
    let highScore = parseInt(localStorage.getItem("highScore") || "0");

    highScoreText.textContent = "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: " + highScore;

    spinner.addEventListener("mousedown", (e) => {
      if (isBallActive || remainingBalls <= 0) return;
      dragging = true;
      startX = e.clientX;
    });

    window.addEventListener("mouseup", () => {
      if (dragging) {
        dragging = false;
        spinForce = Math.min(Math.abs(spinForce), 80);
        launchBall(spinForce);
      }
    });

    window.addEventListener("mousemove", (e) => {
      if (!dragging) return;
      spinForce = e.clientX - startX;
      spinner.style.transform = `translateX(-50%) rotate(${spinForce}deg)`;
    });

    function launchBall(force) {
      if (isBallActive) return;
      isBallActive = true;
      positionY = 470;
      positionX = 160;
      velocity = -Math.abs(force) * 0.4;
      ball.style.left = positionX + "px";
      ball.style.top = positionY + "px";
      ball.style.display = "block";
      dropBall();
    }

    function dropBall() {
      const fall = setInterval(() => {
        velocity += 0.8;
        positionY += velocity;
        positionX += Math.random() * 2 - 1.5;

        ball.style.top = positionY + "px";
        ball.style.left = positionX + "px";

        if (positionY >= 30 && positionY <= 45) {
          if (positionX >= 30 && positionX <= 90) {
            endBall("‡∏û‡∏•‡∏≤‡∏î (‡∏ä‡πà‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢)", 0);
            clearInterval(fall);
          } else if (positionX >= 130 && positionX <= 190) {
            endBall("üéâ ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏°! (‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á)", 100);
            clearInterval(fall);
          } else if (positionX >= 230 && positionX <= 290) {
            endBall("‡∏û‡∏•‡∏≤‡∏î (‡∏ä‡πà‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤)", 0);
            clearInterval(fall);
          }
        }

        if (positionY > 500) {
          endBall("‡∏û‡∏•‡∏≤‡∏î (‡∏´‡∏•‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô)", 0);
          clearInterval(fall);
        }
      }, 20);
    }

    function endBall(message, points) {
      ball.style.display = "none";
      isBallActive = false;
      resultText.textContent = `‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${round} ‚û§ ${message} (+${points} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)`;
      score += points;
      remainingBalls--;
      round++;

      if (score > highScore) {
        highScore = score;
        localStorage.setItem("highScore", highScore);
        highScoreText.textContent = "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: " + highScore;
      }

      scoreText.textContent = "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score;
      remainingText.textContent = "‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: " + remainingBalls;
      roundText.textContent = `‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà: ${round} / 100`;

      if (remainingBalls <= 0) {
        resultText.textContent += " üéÆ ‡∏à‡∏ö‡πÄ‡∏Å‡∏°!";
      }
    }

    function resetGame() {
      score = 0;
      remainingBalls = 100;
      round = 1;
      scoreText.textContent = "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: 0";
      remainingText.textContent = "‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 100";
      roundText.textContent = "‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà: 1 / 100";
      resultText.textContent = "";
    }
  </script>
</body>
</html>
